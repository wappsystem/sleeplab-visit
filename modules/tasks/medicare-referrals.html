<div id=D__ID>
    <!--third html start -->
    <div class="container mt-95 mb-3">
      <div class="row" >
        <!-- form container start -->
        <div class="col-12 col-lg-7 col-md-11 col-sm-12 mx-auto formbox">
          <div class="row">
            <div class="col-12">
              <!-- form start -->
              <form id="F__ID">
                 <h3>Visit information, medicare and referring doctors</h3>
                 <div class="form-group">
     				 <div class="questiongroup ">
                        <fieldset class="subquestions">
                            <label ><span class="">Please describe in 20 words or less, your reason for booking this appointment</span></label><br>
                            <textarea class="form-control"  name="Reason" id="Reason__ID" placeholder="Reason" required ></textarea>
                         </fieldset>
                     </div>
                 </div>
                 <div class="form-group">
     				 <div class="questiongroup ">
                        <fieldset class="subquestions">
                            <label ><span class="">Benefits from..</span>
                                <select name=benefits class="form-control" required>
                                    <option></option>
                                    <option>Medicare</option>
                                    <option>Department of Veterans Affairs</option>
                                    <option value='Self Funded'>Self Funded (No Benefits)</option>
                                </select>
                           </label><br>
                         </fieldset>
                     </div>
                     <div class="questiongroup " id=s1a__ID>
                        <fieldset class="subquestions">
                            <label ><span class="">Medicare Number</span>
                                <input  class="form-control" type="text" id=Medicare_number__ID name="Medicare_number" placeholder="Medicare Number" required ></label><br>
                                <div id=alert_success__ID class="alert alert-success" >
                                  <strong>Correct Medicare Number</strong>
                                </div>
                                <div id=alert_fail__ID class="alert alert-danger" >
                                  <strong>Wrong Number! Please check</strong>
                                </div>
                         </fieldset>
                     </div>
                     <div class="questiongroup " id=s1b__ID>
                        <fieldset class="subquestions">
                            <label ><span class="">Ref Number</span>
                                <input  class="form-control" type="number" min=1 max=10 name="Medicare_reference_number" placeholder="Reference Number" required >
                            </label><br>
                            <label ><span class="">Expiry Month/Year</span>
                                <input  class="form-control" type="number" min=1 max=12 name="Medicare_expiry_mm" placeholder="Month" required >
                            </label>&nbsp;/&nbsp;<br>
                            <label ><span class=""></span>
                                <input  class="form-control" type="number"  name="Medicare_expiry_yy" placeholder="Year" required >
                            </label><br>
                         </fieldset>
                     </div>
                     <div class="questiongroup " id=s2__ID>
                        <fieldset class="subquestions">
                            <label ><span class="">Department of Veterans Affairs number</span>
                                <input class="form-control" type="text" name="DVA" placeholder="DVA Number" required ></label><br>
                         </fieldset>
                     </div>
                 </div>
                 <div class="form-group">
     				 <div class="questiongroup ">
                        <fieldset class="">
                            <label ><span class="">Referring doctor</span>
                                <input class="form-control" type="text" name="Referring_doctor" placeholder="Referring doctor" required >
                           </label><br>
                           <label><span class="">Referring doctor's address</span>
                               <textarea class="form-control" name="Referring_doctor_address" placeholder="Address" required ></textarea>
                           </label><br>
                         </fieldset>
                     </div>
                 </div>
                 <div class="form-group">
     				 <div class="questiongroup ">
                        <fieldset class="">
                            <label class="checkboxes" >GP same as referring doctor
                                <input type="checkbox" name="GP_Ref" id=GP_Ref__ID>
                                <span class="check_checkmark"></span>
                           </label><br>
                         </fieldset>
                     </div>
                 </div>
                 <div class="form-group">
     				 <div class="questiongroup ">
                        <fieldset class="">
                            <label ><span class="">GP/Family doctor</span>
                                <input class="form-control" type="text" name="GP_Family_doctor" id="GP_Family_doctor__ID" placeholder="GP/Family doctor" required >
                           </label><br>
                           <label ><span class="">GP/Family doctor's address</span>
                               <textarea class="form-control" name="GP_Family_doctor_address" id="GP_Family_doctor_address__ID" placeholder="Address" required ></textarea>
                           </label><br>
                         </fieldset>
                     </div>
                 </div>
                 <div class="form-group">
     				 <div class="questiongroup ">
                        <fieldset class="">
                            <label ><span class="">Referring letter (Attach file by clicking on <i class="fa fa-paperclip"></i> below)</span>
                           </label>
                           <div id=File_Name__ID data-id=File_Name></div>
                           <br>
                         </fieldset>
                     </div>
                 </div>
                 <button type="submit" id="submit__ID" class="btn btn-primary btn-lg">Submit</button>
              </form>
            </div>
         </div>
        </div>
      </div>
    </div>
    <script>
        function F__ID(){
            //-------------------------------------
            VmInclude:__COMPONENT__/module/form.v1.js
            VmInclude:__CURRENT_PATH__/task-form.js
            //-------------------------------------
            m.default_load=m.load;
            m.load=function(){
                m.default_load();
                if(m.input.readonly!=undefined) $('#submit__ID').hide();
                $vm.render_file_field_v2(m.input.record,'__ID',$('#File_Name__ID'));
                $('#alert_success__ID').hide();
                $('#alert_fail__ID').hide();
                benefits_process();
            }
            //-------------------------------------
            var benefits_process=function(){
                $('#s1a__ID').hide(); $('#s1b__ID').hide(); $('#s2__ID').hide(); $('#s3__ID').hide();
                $("#s1a__ID input").prop('disabled', true);
                $("#s1b__ID input").prop('disabled', true);
                $("#s2__ID input").prop('disabled', true);
                $("#s3__ID input").prop('disabled', true);
                var benefits = $("select[name='benefits']").val();
                switch(benefits){
                    case 'Medicare':
                        $('#s1a__ID').show(); $('#s1b__ID').show();
                        $("#s1a__ID input").prop('disabled', false);
                        $("#s1b__ID input").prop('disabled', false);
                        break;
                    case 'Department of Veterans Affairs':
                        $('#s2__ID').show();
                        $("#s2__ID input").prop('disabled', false);
                        break;
                    case 'Self Funded':
                        $('#s3__ID').show();
                        $("#s3__ID input").prop('disabled', false);
                        break;
                }
            };
            //--------------------------------------------------------
            $('#GP_Ref__ID').on('change',function(){
              if($('#GP_Ref__ID:checked').val()=='on'){
                  $("#GP_Family_doctor__ID").prop("required",false);
                  $("#GP_Family_doctor_address__ID").prop("required",false);
              }
              else{
                  $("#GP_Family_doctor__ID").prop("required",true);
                  $("#GP_Family_doctor_address__ID").prop("required",true);
              }
            })
            $('#s1a__ID input[name=Medicare_number').on('change',function(){
               var mcn=$(this).val();
               var mcn1=mcn.replace(/\s/g,'');
               if(mcn1.length==10){
                   var output = [];
                   for (var i = 0; i< mcn1.length; i++) {output.push(+mcn1.charAt(i));}
                   var checksum=(output[0]*1+output[1]*3+output[2]*7+output[3]*9+output[4]*1+output[5]*3+output[6]*7+output[7]*9)%10;
                   if(checksum==parseInt(output[8])){
                       $('#alert_success__ID').show();
                       $('#alert_fail__ID').hide();
                       //alert_validation="";
                   }
                   else{
                       $('#alert_success__ID').hide();
                       $('#alert_fail__ID').show();
                       //alert_validation="Please check for wrong Entry";
                       //$('#ModalLabel').html('Error!');
                   }
               }
              else {
                  $('#alert_success__ID').hide();
                  $('#alert_fail__ID').show();
                  //alert_validation="Please check for wrong Entry";
                  //$('#ModalLabel').html('Error!');
              }
            })
            //--------------------------------------------------------
            var currentYear = (new Date).getFullYear();
            $('#s1b__ID input[name=Medicare_expiry_yy]').prop('min',currentYear).prop('max',currentYear+5);
            //--------------------------------------------------------
            $("select[name='benefits']").on('change',function(){
              benefits_process();
            })
            //-------------------------------------
        }
    </script>
    <style>
        #D__ID{
            height:100%;
            animation: vm_module_fadein 1.0s;
            /*background-color: #fff;*/
            overflow:auto;
        }
    </style>
    VmInclude:__CURRENT_PATH__/task-form.css
</div>
